<div class="blank-layout-container justify-content-center align-items-center">
  <div
    class="position-relative row w-100 h-100 bg-gredient justify-content-center"
  >
    <div class="col-lg-4 d-flex align-items-center">
      <mat-card class="cardWithShadow boxed-auth">
        <mat-card-content class="p-32">
          <div class="text-center">
            @if(options.theme === 'light') {
            <a [routerLink]="['/dashboards/dashboard1']">
              <img
                src="./assets/images/logos/logo_goreu_text_ligth.png"
                class="align-middle m-2"
                alt="logo"
                style="max-width: 60%"
              />
            </a>
            } @if(options.theme === 'dark') {
            <a [routerLink]="['/dashboards/dashboard1']">
              <img
                src="./assets/images/logos/light-logo.svg"
                class="align-middle m-2"
                alt="logo"
              />
            </a>
            }
          </div>
          <span class="f-s-14 d-block mat-body-1 m-t-8 text-center m-t-30"
            >RESTABLECER</span
          >

          <form class="m-t-30" [formGroup]="loginForm">
            <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
              >Correo Electronico</mat-label
            >
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input type="email" matInput formControlName="email" />
              @if(loginForm.controls.email.touched
              &&loginForm.controls.email.invalid){
              <mat-hint class="m-b-16 error-msg">
                @if (loginForm.controls.email.hasError('email') &&
                !loginForm.controls.email.hasError('required')) {
                <div class="text-error">Ingresa un email válido</div>
                } @if (loginForm.controls.email.hasError('required')) {
                <div class="text-error">
                  Email es <strong>requerido</strong>
                </div>
                }
              </mat-hint>
              }
            </mat-form-field>

            <!-- token  -->
            <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
              >Token</mat-label
            >
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input type="text" matInput formControlName="token" />
              @if(loginForm.controls.token.touched
              &&loginForm.controls.token.invalid){
              <mat-hint class="m-b-16 error-msg">
                @if (loginForm.controls.token.hasError('required')) {
                <div class="text-error">token <strong>requerido</strong></div>
                }
              </mat-hint>
              }
            </mat-form-field>

            <!-- fin token -->

            <mat-label class="f-s-14 f-w-600 m-b-12 d-block"
              >Contraseña</mat-label
            >
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input
                matInput
                [type]="hide ? 'password' : 'text'"
                [formControl]="loginForm.controls.newPassword"
              />
              <button
                mat-icon-button
                matSuffix
                (click)="hide = !hide"
                [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="hide"
              >
                <mat-icon class="op-5">{{
                  hide ? "visibility_off" : "visibility"
                }}</mat-icon>
              </button>

              @if(loginForm.controls.newPassword.touched &&
              loginForm.controls.newPassword.invalid){
              <mat-hint class="m-b-16 error-msg">
                @if (loginForm.controls.newPassword.hasError('minlength') &&
                !loginForm.controls.newPassword.hasError('required')) {
                <div class="text-error">
                  Contraseña debe tener al menos 8 dígitos
                </div>
                } @if (loginForm.controls.newPassword.hasError('required')) {
                <div class="text-error">
                  la nueva Contraseña es <strong>requerida</strong>
                </div>
                }
              </mat-hint>
              }
            </mat-form-field>

            <mat-label class="f-s-14 f-w-600 m-b-12 d-block"
              >Confirme Contraseña</mat-label
            >
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input
                matInput
                [type]="alignhide ? 'password' : 'text'"
                [formControl]="loginForm.controls.confirmNewPassword"
              />
              <button
                mat-icon-button
                matSuffix
                (click)="alignhide = !alignhide"
                [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="alignhide"
              >
                <mat-icon class="op-5">{{
                  alignhide ? "visibility_off" : "visibility"
                }}</mat-icon>
              </button>

              @if(loginForm.controls.confirmNewPassword.touched &&
              loginForm.controls.confirmNewPassword.invalid){
              <mat-hint class="m-b-16 error-msg">
                @if (loginForm.controls.confirmNewPassword.hasError('minlength')
                && !loginForm.controls.confirmNewPassword.hasError('required'))
                {
                <div class="text-error">
                  Contraseña debe tener al menos 8 dígitos
                </div>
                } @if
                (loginForm.controls.confirmNewPassword.hasError('required')) {
                <div class="text-error">
                  la confirmacion e la nueva Contraseña es
                  <strong>requerida</strong>
                </div>
                }
                @if(loginForm.controls.confirmNewPassword.hasError("mismatch")){
                <mat-error>Las contraseñas no coinciden</mat-error>
                }
              </mat-hint>
              }
            </mat-form-field>

            <button
              mat-flat-button
              color="primary"
              class="w-100"
              [disabled]="loginForm.invalid || isLoading"
              (click)="changePassword()"
            >
              @if (!isLoading) { Cambiar contraseña } @else { Procesando… }
            </button>

            <!-- input -->
          </form>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
